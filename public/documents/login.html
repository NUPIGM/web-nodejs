<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>login</title>
</head>

<body>
	<a href="./index.html">主页</a>
	<form id="myForm">
		Username: <input type="text" id="user" name="user"><br>
		Password: <input type="password" id="password" name="password">
		<input type="submit" value="Submit">
	</form>
	<div id="output"></div>

	<div>
		<input type="button" onclick="getFet()" id="get" value="get">
	</div>

</body>

<script>
	function getFet() {
		fetch("/debug?a=1")
			.then(res => res.text())
			.then(data => {
				console.log(data);
				document.getElementById("output").textContent=data;
			})
			.catch(error => console.error('Error:', error));
	}
	document.getElementById('myForm').addEventListener('submit', (event) => {
		event.preventDefault();
		let user = document.getElementById("user").value
		let password = document.getElementById("password").value
		fetch("/login", {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({
				user: user,
				pwd: password
			})
		}).then(res=>res.text()).then((response) => {
			// handle the response
			let outputElement = document.getElementById('output');
			outputElement.textContent=response;
			// if (outputElement) {
			// 	outputElement.textContent = typeof response === 'object' ? JSON.stringify(response) : response;
			// console.log(response);

			// } else {
			// 	console.log("没有找到 id 为 'output' 的元素");
			// }
		}).catch(e => console.log('There was a problem with your fetch operation: ' + e.message));;
	});
</script>

</html>